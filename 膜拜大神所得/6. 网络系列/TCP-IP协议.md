# TCP/IP

## OSI 七层模型--开放式系统互联模型 ( 只是概念模型 -- 没有实际用 )

1. 应用层 ： 网络主机提供**方法和接口**，直接对应用户行为；例如 HTTP、FTP、SMTP；

2. 表示层（语法层） ：对数据 序列化，加密解密，压缩与解压；

3. 会话层：管理会话；例如 Open/Close/ReOpen/检查状态等；

4. 传输层：主机到主机的数据通信；

   - 建立连接保证数据封包发送、接受顺序一致；
   - 提供可靠性（发送者知道数据有没有完成送达）；
   - 提供流控制；
   - 提供多路复用

5. 网络层：提供数据在逻辑单元（IP 地址）之间的传递；

   - 路由：决定数据下一站在哪
   - 寻址：为数据封包增加头信息（地址等）

6. 数据链路层：提供数据在设备和设备间传输（网卡->路由器->路由器->防火墙->等等）；

   - 流控制：发送者和接收者之间同步数据的 收发速度和数据量；
   - 错误流程：检测数据有没有出错，出错并重发;

7. 物理层：定义底层一个个位（bit）的数据怎么转化为物理信号；例如：二进制怎么转化电压高低，如何转化为其他物理介质上的信号；
   - 将数据传递行为转化为物理设备识别的信号；

**注**
应用层 ------|
表示层 ------|-->用户数据
会话层 ------|
传输层 --------->数据封包
网络层 --------->帧、帧、帧
数据链路层------>二进制
物理层 --------->物理信号

## TCP/IP 协议

1. 应用层 ---->http/FTP/SMTP：应用间通信；数据;
   原始数据：程序员自己定义的数据格式；

2. 传输层 ---->TCP/UDP 协议（主机到主机）；提供端口号：80；
   TCP Header:描述传输的数据；原始数据增加头部，包括原端口号，目标端口号
   TCP 数据:原始数据转化的；

3. 网络层 ---->IP 协议（IP 地址-->IP 地址）；提供 from(从哪来)IP，to（到哪去）IP
   IP Header:传输层的数据 再增加头部,包括原地址和目标地址；
   IP 数据：把传输层数据切割成一个个小块（帧）

4. 链路层 ---->多种底层网络协议 Ethernet,wifi(设备-->设备)；提供 form(原来)mac 地址，to（到哪去）mac 地址
   Frame Header: 上一层每个小块增加头部；
   Frame Data :
   Frame Footer: 上一层每个小块增加尾部；

5. 物理层 ---->传输介质：双绞线、同轴电缆、光纤（把二进制数据转化为电信号、光信号）

## IPV4 协议: 4 字节（32 位二进制）

1. 采用 4 个字节（32 位）来表示 IP 地址;
2. 1 个字节(8 位)：`2*2*2*2*2*2*2*2=2^8=256`; 取值范围: 0 ~ 255;
3. IPv4 协议理论上可以提供约 42 亿个独立的地址 `256*256*256*256 = 256^4 = (2^8)^4 = 2^32 =4,294,967,296`;

## IPV6 协议

`2001:0db8:85a3:0000:0000:8a2e:0370:7334`

1. 每个十六进制字符：用 4 位二进制 表示（因为 `2**4=16`,刚好对应 0-9 和 a-f）。
2. 每组 4 个字符：4 字符 ×4 位/字符=16 位。
3. 总共 8 组：8 组 ×16 位/组=128 位。
4. `2**128 大约 3.4×10**38`
