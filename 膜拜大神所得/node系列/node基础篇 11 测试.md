# 测试 (原文:深入浅出 Node.js)

测试包含 单元测试、性能测试、安全测试、功能测试 等几个方面

## 单元测试

### 单元测试介绍

单元测试主要包含断言、测试框架、测试用例、测试覆盖率、mock、持续集成等几个方面，由于 Node 的特殊性，它还会加入“异步代码测试”和“私有方法的测试”这两个部分。

1. 断言（assert 模块）---是单元测试中用来保证最小单元是否正常的检测方法。

   市面上的断言库大多都是基于 assert 模块进行封装和扩展的

   在断言规范中，定义了以下几种检测方法。

   - ok()：判断结果是否为真；
   - equal()：判断实际值与期望值是否相等；
   - notEqual()：判断实际值与期望值是否不相等；
   - deepEqual()：判断实际值与期望值是否深度相等（对象或数组的元素是否相等）；
   - notDeepEqual()：判断实际值与期望值是否不深度相等；
   - strictEqual()：判断实际值与期望值是否严格相等（相当于=）；
   - notStrictEqual()：判断实际值与期望值是否不严格相等（相当于 I=)；
   - throws()：判断代码块是否抛出异常；
   - **除此之外，Node 的 assert 模块还扩充了如下两个断言方法。**
   - doesNotThrow()：判断代码块是否没有抛出异常；
   - ifError()：判断实际值是否为一个假值(null、undefined、0、''、false),如果实际值为真值，将会抛出异常；

2. 测试框架：mocha

   - 测试风格

     1. 测试驱动开发（TDD）：
        TDD 关注所有功能是否被正确实现，每一个功能都具备对应的测试用例；  
        TDD 的表述方式偏向于功能说明书的风格；
     2. 行为驱动开发（BDD）：
        BDD 关注整体行为是否符合预期，适合自顶向下的设计方式。
        BDD 的表述方式更接近于自然语言的习惯。

   - 测试报告

3. 测试代码的文件组织
4. 测试用例
   - 异步测试
   - 超时设置
5. 测试覆盖率
6. mock
7. 私有方法的测试

### 工程化与自动化

1. 工程化--Makefile
2. 持续集成

## 性能测试

性能测试包括 负载测试、压力测试、基准测试 等

- 基准测试：要统计的就是在多少时间内执行了多少次某个方法。为了增强可比性，一般会以次数作为参照物，然后比较时间，以此来判别性能的差距。
- 压力测试：通常还会对网络接口进行压力测试以判断网络接口的性能；  
  对网络接口做压力测试需要考查的几个指标有吞吐率、响应时间和并发数，这些指标反映了服务器的并发处理能力。
  常用工具 ab、siege、http_load 等

## 安全测试

## 功能测试
