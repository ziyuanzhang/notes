##

**事件循环：**为了协调 事件、用户交互 、脚本 、渲染、网络等，用户代理 必须使用事件循环「Event Loop」；  
**注：**事件循环「event-loop」是解决 JS 单线程运行阻塞的一种机制；

- 所有的「同步任务」都在主线程进行;

- 「异步任务」进入「任务队列」；  
   异步任务均由事件触发线程控制，只要异步任务有了运行结果，就会在任务队列中放置回调函数（所以说异步任务一定要指定回调函数，当主线程开始执行异步任务，其实就是在执行对应的回调函数）;

- 如果主线程的所有同步任务都执行完，系统就会去读取「任务队列」，如果有可以执行的，就会结束等待状态，进入主线程，开始执行;

- 主线程不断的执行第 3 步;

  这就是 JS 的运行机制，也称为「Event Loop」事件循环。

  **异步任务分类：**  
  宏任务「macrotasks」：script（整体代码）、setTimeout、setInterval、setImmediate、I/O、UI rendering；  
  微任务「microtasks」：process.nextTick（NodeJS）、Promise、Object.observe、MutationObserver

#### 浏览器的“渲染”是多进程的；包含了 Browser 进程，第三方插件进程，GPU 进程，浏览器“渲染进程”（浏览器内核）

- JS 引擎线程：也称为 JS 内核，负责处理 JavaScript 脚本程序
- 事件触发线程：用来控制事件循环，当对应的事件符合条件被触发时，该线程会将事件添加到待处理的事件队列中，等待 JS 引擎的处理。
- 定时器触发线程：JS 是单线程的，当处于阻塞线程的状态会影响计时的准确性，因此需要单独开一个线程来计时。
- 异步 http 请求线程：XMLHttpRequest 在连通后通过浏览器新起一个线程请求
