# python è¿›é˜¶

- é¢å‘è¿‡ç¨‹ ä¸ é¢å‘å¯¹è±¡
  1. é¢å‘è¿‡ç¨‹ï¼šå¼ºè°ƒè¿‡ç¨‹ï¼Œç¬¬ä¸€æ­¥ã€ç¬¬äºŒæ­¥ã€ç¬¬ä¸‰æ­¥ã€‚ã€‚ã€‚ã€‚
  2. é¢å‘å¯¹è±¡ï¼šå¼ºè°ƒä»¥â€œå¯¹è±¡ä¸ºåŸºç¡€â€å®Œæˆå„ç§æ“ä½œï¼Œå¯¹è±¡æ˜¯å…·æœ‰å±æ€§å’Œæ–¹æ³•çš„ï¼ˆä¾‹ï¼šæ´—è¡£æœï¼Œäº¤ç»™åˆ«äºº/æœºå™¨ï¼Œè®©å®ƒåšï¼‰ã€‚
     - å®ƒæ˜¯åŸºäºé¢å‘è¿‡ç¨‹çš„

- å°è£…ã€ç»§æ‰¿ã€å¤šæ€
  1. å°è£…ï¼šã€å¥½å¤„ï¼šç®€åŒ–ç¼–ç¨‹ã€‘ï¼›éšè—å¯¹è±¡çš„å±æ€§å’Œå®ç°ç»†èŠ‚ï¼Œä»…å¯¹å¤–å…¬å¼€æ¥å£ï¼›
  2. ç»§æ‰¿ï¼šã€å¥½å¤„ï¼šä»£ç å¤ç”¨ã€‘ï¼›å­ç±»ç»§æ‰¿çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼›ä½¿å¾—å­ç±»å¯¹è±¡ï¼ˆå®ä¾‹ï¼‰å…·æœ‰çˆ¶ç±»çš„ç‰¹å¾å’Œè¡Œä¸ºï¼›
  3. å¤šæ€ï¼šã€å¥½å¤„ï¼šè§£è€¦åˆï¼Œå¯æ‰©å±•ã€‘åŒä¸€ä¸ªäº‹ç‰©åœ¨ä¸åŒæ—¶åˆ»åšå‡ºçš„ååº”ä¸ä¸€æ ·ï¼›ä¾‹ï¼šï¼ˆåŒä¸€ä¸ªäººï¼‰åœ¨æ•™å®¤æ˜¯å­¦ç”Ÿï¼Œåœ¨å•†åœºæ˜¯é¡¾å®¢ï¼Œåœ¨å®¶æ˜¯ã€‚ã€‚ã€‚
     - åŒä¸€ä¸ªå‡½æ•°æ¥æ”¶å‚æ•°ä¸ä¸€æ ·ï¼Œè¡¨ç°å‡ºæ¥çš„ç»“æœä¹Ÿä¸ä¸€æ ·ï¼›

- ç±»ä¸å¯¹è±¡
  1. ç±»ï¼šæ˜¯æŠ½è±¡æ¨¡æ¿ï¼ˆå›¾çº¸ï¼‰
  2. å¯¹è±¡ï¼šæ˜¯ç±»çš„å…·ä½“å®ä¾‹ï¼ˆæŒ‰å›¾çº¸é€ å‡ºæ¥çš„ä¸œè¥¿ï¼‰ï¼›æœ‰ å±æ€§ï¼ˆåè¯ï¼‰ã€æ–¹æ³•ï¼ˆåŠ¨è¯ï¼‰

  ![Pythonçš„æ ˆä¸å †](./img/Pythonçš„æ ˆä¸å †.png)

## ç±»

- self å…³é”®å­—ï¼šç”¨äºæŒ‡å‘â€œå¯¹è±¡å®ä¾‹æœ¬èº«â€ï¼›
  1. è°è°ƒç”¨ï¼ŒæŒ‡å‘è°
  2. ç±»ä¼¼ js ä¸­çš„ this å…³é”®å­—

- é­”æ³•æ–¹æ³•ï¼š

  åœ¨ Python ä¸­ï¼Œæœ‰ä¸€äº›å¯ä»¥"ç»™ Python ç±»å¢åŠ é­”åŠ›çš„ç‰¹æ®Šæ–¹æ³•"ï¼Œå®ƒä»¬"æ€»æ˜¯è¢«åŒä¸‹åˆ’çº¿æ‰€åŒ…å›´"ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºé­”æ³•æ–¹æ³•ã€‚"åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ä¼šè¢«è‡ªåŠ¨è°ƒç”¨"ï¼Œä¸éœ€è¦å¼€å‘è€…æ‰‹åŠ²å»è°ƒç”¨ã€‚
  1. `__init__()` ï¼šåœ¨åˆ›å»ºå¯¹è±¡æ—¶è°ƒç”¨ï¼Œåˆå§‹åŒ–æ–¹æ³•ï¼›
  2. `__str__()` ï¼šæ‰“å°å¯¹è±¡æ—¶è°ƒç”¨ï¼Œè¿”å›å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€ä¸é‡å†™ï¼Œprint()å¯¹è±¡æ—¶ï¼Œè¿”å›å¯¹è±¡çš„å†…å­˜åœ°å€ã€‘ï¼›
  3. `__del__()` ï¼š å½“.py æ–‡ä»¶æ‰§è¡Œç»“æŸå æˆ– æ‰‹åŠ¨åˆ é™¤å¯¹è±¡åè°ƒç”¨ï¼›

  ```python
  class Car:
    def __init__(self, name, color):
        self.name = name
        self.color = color

    def show(self):
        print("name:", self.name, "color:", self.color)

    def __str__(self):
        return f'{self.name} {self.color}'

    def __del__(self):
        print("å¯¹è±¡è¢«åˆ é™¤")

  c1=Car("BMW", "white")
  c1.show() # name: BMW color: white
  print(c1.name,c1.color)
  ```

### ç±»çš„é«˜çº§

- ä¸‰ç§å®šä¹‰æ–¹å¼ï¼š
  1. `class ç±»å:`
  2. `class ç±»å():`
  3. `class ç±»å(çˆ¶ç±»):`

- å¤šç»§æ‰¿ï¼šä¼˜å…ˆå·¦è¾¹é¡ºåº
  1. `class ç±»å(çˆ¶ç±»1, çˆ¶ç±»2):`ä¼˜å…ˆâ€œçˆ¶ç±» 1 â€çš„å±æ€§åå’Œæ–¹æ³•
  2. mro: æŸ¥çœ‹ç»§æ‰¿é¡ºåº

  3. é‡å†™ï¼š

  ```python
      class blueCar:
        def __init__(self):
            self.name = "blue"
        def show(self):
            print("name:", self.name)

      class redCar:
        def __init__(self):
            self.name = "red"
        def show(self):
            print("name:", self.name)
        def run():
            print("run")

      class Car(blueCar, redCar):
        def __init__(self):
            self.name = "new"
        def show(self):
            print("name:", self.name)
        def show_blue(self):
            self.show() #å°±è¿‘ï¼Œè°ƒç”¨æœ¬èº«çš„
            ## æ–¹æ³•1
            blueCar.__init__(self) # ä¼ è¿›å»å¹¶æ”¹å˜selfçš„name: blue
            blueCar.show(self) #selfçš„nameå·²ç»æ˜¯blueäº†
        def show_red(self):
            redCar.__init__(self)
            redCar.show(self)
        def show_parent(self):
            ## æ–¹æ³•2
            super().run()
      if __name__ == "__main__":
         c1 = Car()
         print(c1.mro()) # c1--> blueCar --> redCar --> object
         c1.show() # name: new
         print("------------------")
         c1.show_blue() # name: blue
         c1.show() # name: blue
         print("------------------")
         c1.show_red() # name: red
         c1.show() # name: red
         print("------------------")
         c1.show_parent() #æŸ¥æ‰¾é¡ºåº blueCar -->redCar --> object

  ```

- å°è£…

  ```python
    class Person:
        def __init__(self, name):
            self.name = name
            self.__mobile = "123456" # ç§æœ‰å±æ€§
        def get_mobile(self):
            return self.__mobile

    class Student(Person):
        pass
    if __name__ == "__main__":
        s1 = Student("å¼ ä¸‰")
        print(s1.name) # å¼ ä¸‰
        print(s1.__mobile) # æŠ¥é”™
        print(s1.get_mobile()) # 123456
  ```

### å¯¹è±¡å±æ€§ã€ç±»å±æ€§ã€ç±»æ–¹æ³•ã€é™æ€æ–¹æ³•

- å¯¹è±¡å±æ€§: å¯¹è±¡å®ä¾‹çš„å±æ€§ï¼Œå¯¹è±¡å®ä¾‹æœ‰è‡ªå·±å•ç‹¬çš„å±æ€§ï¼›
- ç±»å±æ€§: å±äºç±»çš„ï¼›å³:èƒ½è¢«è¯¥ç±»ä¸‹æ‰€æœ‰çš„å¯¹è±¡æ‰€å…±äº«ã€‚A å¯¹è±¡ä¿®æ”¹ç±»å±æ€§ï¼ŒB å¯¹è±¡è®¿é—®çš„æ˜¯ä¿®æ”¹åçš„.
- ç±»æ–¹æ³•: å±äºç±»çš„ï¼›å®šä¹‰æ—¶ï¼Œå¿…é¡»ä½¿ç”¨â€œè£…é¥°å™¨@clasSmethodâ€ï¼Œä¸”â€œç¬¬ 1 ä¸ªå‚æ•°â€å¿…é¡»è¡¨ç¤ºç±»å¯¹è±¡ï¼Œé€šå¸¸ä»¥ cls ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°åã€‚
- é™æ€æ–¹æ³•: éœ€è¦ä½¿ç”¨â€œè£…é¥°å™¨@staticmethodâ€ æ¥æ ‡è¯†å…¶ä¸ºé™æ€æ–¹æ³•ï¼Œé™æ€æ–¹æ³•ä¸æ™®é€šæ–¹æ³•ä¸€æ ·ï¼Œåªæ˜¯ä¸éœ€è¦ self å‚æ•°ã€‚

**æ³¨ï¼š** ç±»æ–¹æ³• ä¸ é™æ€æ–¹æ³• åŒºåˆ«ä¸å¤§ï¼›

```python
class Student:
    teacher_name = "å¼ ä¸‰" # ç±»å±æ€§
    def __init__(self,name):
        self.name = name # å¯¹è±¡å±æ€§
    def show_name(self):
        print("å­¦ç”Ÿname:", self.name)
    @classmethod # ç±»æ–¹æ³•
    def show_classMethod(cls):
        print("teacher:", cls.teacher_name)
        print("teacher:", Student.teacher_name)
    @staticmethod # é™æ€æ–¹æ³•
    def show_staticMethod():
        print("teacher:", Student.teacher_name)

if __name__ == "__main__":
    s = Student("å­¦ç”Ÿ")
    s.show_name()
    s.show_classMethod()
    s.show_staticMethod()
```

## é—­åŒ…

é—­åŒ…ï¼šæ ¹æ®è¯æ³•ä½œç”¨åŸŸçš„è§„åˆ™ï¼Œå†…éƒ¨å‡½æ•°æ€»æ˜¯å¯ä»¥è®¿é—®å…¶å¤–éƒ¨å‡½æ•°ä¸­å£°æ˜çš„å˜é‡ï¼Œå½“é€šè¿‡è°ƒç”¨ä¸€ä¸ªå¤–éƒ¨å‡½æ•°è¿”å›ä¸€ä¸ªå†…éƒ¨å‡½æ•°åï¼Œå³ä½¿å¤–éƒ¨å‡½æ•°å·²ç»æ‰§è¡Œç»“æŸäº†ï¼Œä½†æ˜¯å†…éƒ¨å‡½æ•°å¼•ç”¨å¤–éƒ¨å‡½æ•°çš„å˜é‡ä¾æ—§ä¿å­˜åœ¨å†…å­˜ä¸­ï¼ŒæŠŠè¿™äº›å˜é‡çš„é›†åˆç§°ä¸ºé—­åŒ…ï¼›

`fn_outer(100)(200)`: å…¶ä¸­ `fn_outer(100)`æ˜¯å¤–éƒ¨å‡½æ•°æ‰§è¡Œåè¿”å›çš„å†…éƒ¨å‡½æ•°`fn_inner`ï¼Œç­‰ä»·äº `fn_inner(200)`ï¼›

- global: å…³é”®å­—ç”¨æ¥åœ¨å‡½æ•°æˆ–å…¶ä»–å±€éƒ¨ä½œç”¨åŸŸä¸­ä½¿ç”¨å…¨å±€å˜é‡ã€‚ä½†æ˜¯å¦‚æœä¸ä¿®æ”¹å…¨å±€å˜é‡ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ global å…³é”®å­—ã€‚
- nonlocal: å£°æ˜çš„å˜é‡ä¸æ˜¯å±€éƒ¨å˜é‡,ä¹Ÿä¸æ˜¯å…¨å±€å˜é‡,è€Œæ˜¯å¤–éƒ¨åµŒå¥—å‡½æ•°å†…çš„å˜é‡ã€‚

![Python_é—­åŒ…1](./img/Python_é—­åŒ…1.png)
![Python_é—­åŒ…2](./img/Python_é—­åŒ…2.png)

### è£…é¥°å™¨ -- æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªé—­åŒ…å‡½æ•°

è£…é¥°å™¨ç›®çš„ï¼šåœ¨ä¸æ”¹å˜åŸæœ‰å‡½æ•°çš„æƒ…å†µä¸‹ï¼Œç»™å‡½æ•°æ·»åŠ åŠŸèƒ½ï¼›

è£…é¥°å™¨: æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°

```python
# ä¼ ç»Ÿè£…é¥°å™¨ -- é«˜é˜¶å‡½æ•°
def check_login(fn_name):
    def fn_inner():
        # é¢å¤–åŠŸèƒ½
        print("æ£€éªŒç™»å½•ã€‚ã€‚ã€‚")
        fn_name()
    return fn_inner

def comment():
    print("å‘è¡¨è¯„è®ºã€‚ã€‚ã€‚")
def payment():
    print("æ”¯ä»˜ã€‚ã€‚ã€‚")

# è°ƒç”¨---------------
comment = check_login(comment)
comment()
print("-"*23)
payment = check_login(payment)
payment()
```

```python
# å‡½æ•°è£…é¥°å™¨ -- è¯­æ³•ç³–
def check_login(fn_name):
    def fn_inner():
        # é¢å¤–åŠŸèƒ½
        print("æ£€éªŒç™»å½•ã€‚ã€‚ã€‚")
        fn_name()
    return fn_inner

@check_login
def comment():
    print("å‘è¡¨è¯„è®ºã€‚ã€‚ã€‚")

@check_login
def payment():
    print("æ”¯ä»˜ã€‚ã€‚ã€‚")

# è°ƒç”¨---------------
comment()
print("-"*23)
payment()
```

- è¢«è£…é¥°å‡½æ•°çš„ 4 ç§æƒ…å†µï¼š
  1. æ— å‚æ— è¿”: è®¡æ•°ç”¨
  2. æœ‰å‚æ— è¿”å›: ç»Ÿè®¡ç”¨

     ![python_è£…é¥°å™¨-æœ‰å‚æ— è¿”å›](./img/python_è£…é¥°å™¨-æœ‰å‚æ— è¿”å›.png)

  3. æ— å‚æœ‰è¿”å›
  4. æœ‰å‚æœ‰è¿”å›
     ![python_è£…é¥°å™¨-æœ‰å‚æœ‰è¿”å›](./img/python_è£…é¥°å™¨-æœ‰å‚æœ‰è¿”å›.png)

- å¤šä¸ªè£…é¥°å™¨çš„è£…é¥°è¿‡ç¨‹æ˜¯: ç¦»å‡½æ•°æœ€è¿‘çš„è£…é¥°å™¨å…ˆè£…é¥°ï¼Œç„¶åå¤–é¢çš„è£…é¥°å™¨å†è¿›è¡Œè£…é¥°ï¼Œç”±å†…åˆ°å¤–çš„è£…é¥°è¿‡ç¨‹;

  ```python
    # ---è£…é¥°å™¨å†™æ³•---ï¼ˆè£…é¥°å™¨ä»ä¸Šåˆ°ä¸‹æ‰§è¡Œï¼‰---------
    @checkout_login
    @checkout_code
    def comment():
         print("å‘è¡¨è¯„è®ºã€‚ã€‚ã€‚")

    # ---ä¼ ç»Ÿå†™æ³•-----ï¼ˆæ ˆçš„å½¢å¼ï¼‰----------
    cc = checkout_code(comment)
    cl = checkout_login(cc)
    cl()
  ```

  ![python_è£…é¥°å™¨(å¤šä¸ª)-ä¼ ç»Ÿæ‰§è¡Œæµç¨‹](<./img/python_è£…é¥°å™¨(å¤šä¸ª)-ä¼ ç»Ÿæ‰§è¡Œæµç¨‹.png>)

- ä½¿ç”¨å¸¦æœ‰å‚æ•°çš„è£…é¥°å™¨ï¼Œå…¶å®æ˜¯åœ¨è£…é¥°å™¨å¤–é¢åˆåŒ…è£¹äº†ä¸€ä¸ªå‡½æ•°ï¼Œä½¿ç”¨è¯¥å‡½æ•°æ¥æ”¶å‚æ•°ï¼Œè¿”å›è£…é¥°å™¨ã€‚
  1. è£…é¥°å™¨æ¯å±‚åªèƒ½ä¼ ä¸€ä¸ªå‚æ•°

## æ‹·è´

- èµ‹å€¼ï¼šåªæ˜¯åˆ›å»ºåˆ«åï¼Œä¸åˆ›å»ºæ–°å¯¹è±¡
- æµ…æ‹·è´ï¼šåˆ›å»ºæ–°å®¹å™¨ï¼Œä½†å¡«å……çš„æ˜¯åŸå†…å®¹çš„å¼•ç”¨
  1. å¯¹è±¡æ²¡æœ‰åµŒå¥—ç»“æ„æˆ–åµŒå¥—ç»“æ„ä¸å¯å˜
  2. éœ€è¦å…±äº«åµŒå¥—å¯¹è±¡å¼•ç”¨æ—¶
  3. å¯¹æ€§èƒ½è¦æ±‚è¾ƒé«˜æ—¶

- æ·±æ‹·è´ï¼šé€’å½’åˆ›å»ºæ‰€æœ‰å†…å®¹çš„æ–°å‰¯æœ¬
  1. å¯¹è±¡æœ‰åµŒå¥—çš„å¯å˜ç»“æ„
  2. éœ€è¦å®Œå…¨ç‹¬ç«‹çš„å‰¯æœ¬
  3. ä¿®æ”¹å‰¯æœ¬ä¸åº”å½±å“åŸå§‹å¯¹è±¡æ—¶

* ä¸å¯å˜å¯¹è±¡ï¼šï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€å…ƒç»„ï¼‰åŸæ•°æ®ã€æ·±æ‹·è´æµ…æ‹·è´ï¼Œéƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼›
* å¯å˜å¯¹è±¡ï¼šæ·±æ‹·è´ åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œæµ…æ‹·è´ åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œä½†å¡«å……çš„æ˜¯åŸå¯¹è±¡çš„å¼•ç”¨ï¼›

## ç½‘ç»œ

## è¿›ç¨‹ ä¸ çº¿ç¨‹

- å¤šä»»åŠ¡: æ˜¯æŒ‡åœ¨â€œåŒä¸€æ—¶é—´â€å†…æ‰§è¡Œâ€œå¤šä¸ªä»»åŠ¡â€(ç»™æˆ‘ä»¬çš„æ„Ÿè§‰)ï¼›
- å¹¶å‘: åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œâ€œäº¤æ›¿â€æ‰§è¡Œä»»åŠ¡ï¼›
- å¹¶è¡Œ: åœ¨ä¸€æ®µæ—¶é—´å†…ï¼ŒçœŸæ­£çš„â€œåŒæ—¶ä¸€èµ·â€æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼ˆéœ€è¦å¤šæ ¸ CPUï¼‰ï¼›

1. Python (CPython)ï¼šè¿›ç¨‹ä¼˜å…ˆç­–ç•¥
   - ç”±äº GILï¼ˆå…¨å±€è§£é‡Šå™¨é”ï¼‰çš„å­˜åœ¨ï¼ŒçœŸæ­£çš„å¹¶è¡Œåªèƒ½é€šè¿‡å¤šè¿›ç¨‹å®ç°
   - æ¯ä¸ª Python è¿›ç¨‹æ˜¯ç‹¬ç«‹çš„æ“ä½œç³»ç»Ÿè¿›ç¨‹ï¼Œæœ‰è‡ªå·±ç‹¬ç«‹çš„å†…å­˜ç©ºé—´å’Œ Python è§£é‡Šå™¨
   - è¿›ç¨‹é—´é€šä¿¡éœ€è¦æ˜¾å¼å¤„ç†ï¼ˆé˜Ÿåˆ—ã€ç®¡é“ã€å…±äº«å†…å­˜ç­‰ï¼‰

2. Javaï¼šçº¿ç¨‹ä¼˜å…ˆç­–ç•¥
   - æ²¡æœ‰ GIL çš„é™åˆ¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å¤šçº¿ç¨‹å®ç°çœŸæ­£çš„å¹¶å‘
   - çº¿ç¨‹å…±äº«å†…å­˜ç©ºé—´ï¼Œé€šä¿¡ç®€å•ç›´æ¥
   - ä¹Ÿæ”¯æŒå¤šè¿›ç¨‹ï¼Œä½†çº¿ç¨‹æ˜¯é¦–é€‰çš„å¹¶å‘æ¨¡å‹

- è¿›ç¨‹ï¼šæ˜¯åˆ†é…èµ„æºçš„åŸºæœ¬å•ä½ï¼Œä¸€æ—¦åˆ›å»ºä¸€ä¸ªè¿›ç¨‹å°±ä¼šåˆ†é…ä¸€å®šçš„èµ„æº;
- çº¿ç¨‹ï¼šæ˜¯ cpu è°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œæ¯ä¸ªè¿›ç¨‹è‡³å°‘éƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œè€Œè¿™ä¸ªçº¿ç¨‹å°±æ˜¯æˆ‘ä»¬é€šå¸¸è¯´çš„ä¸»çº¿ç¨‹

### è¿›ç¨‹

```python
   # æ–°å»ºè¿›ç¨‹
   import multiprocessing
   p1 = multiprocessing.Process(target=å‡½æ•°å, args=å…ƒç»„, kwargs=å­—å…¸)
   p1.daemon = True # è®¾ç½®å®ˆæŠ¤è¿›ç¨‹,æ€è·¯1
   p1.start()
   p1.terminate() # ç»“æŸè¿›ç¨‹,æ€è·¯2

   # è·å–å½“å‰è¿›ç¨‹ID
   pid = os.getpid() # æ–¹æ³•ä¸€
   pid = multiprocessing.current_process().pid # æ–¹æ³•äºŒ
   # è·å–çˆ¶çº¿ç¨‹ID
   ppid = os.getppid()
```

è¿›ç¨‹çš„ç‰¹ç‚¹:

1. è¿›ç¨‹ä¹‹é—´æ•°æ®æ˜¯ç›¸äº’éš”ç¦»çš„.
   - å› ä¸ºå­è¿›ç¨‹ç›¸å½“äºæ˜¯çˆ¶è¿›ç¨‹çš„"å‰¯æœ¬"ï¼Œä¼šå°†çˆ¶è¿›ç¨‹çš„"main å¤–èµ„æº"æ‹·è´ä¸€ä»½ï¼Œå³:å„æ˜¯å„çš„

2. é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸»è¿›ç¨‹ä¼šç­‰å¾…å­è¿›ç¨‹æ‰§è¡Œç»“æŸå†ç»“æŸ
   - å¦‚æœè¦è®¾ç½®ä¸»è¿›ç¨‹ç»“æŸï¼Œäºˆè¿›ç¨‹åŒæ­¥ç»“æŸï¼Œæ–¹å¼å¦‚ä¸‹:
     1. æ€è·¯ 1:è®¾ç½®å­è¿›ç¨‹ä¸º å®ˆæŠ¤è¿›ç¨‹ï¼›
     2. æ€è·¯ 2:å¼ºåˆ¶å…³é—­å­è¿›ç¨‹ï¼Œå¯èƒ½å¯¼è‡´å­è¿›ç¨‹å˜æˆåƒµå°¸è¿›ç¨‹ï¼Œäº¤ç”± Python è§£é‡Šå™¨è‡ªåŠ¨å›æ”¶(åº•å±‚æœ‰ init åˆå§‹åŒ–è¿›ç¨‹æ¥ç®¡ç†ç»´æŠ¤)ï¼›

### çº¿ç¨‹

```python
   import threading
   my_lock = threading.Lock()
   mu_lock2 = threading.Lock() # 2æŠŠé”å¯èƒ½é€ æˆé”ä¸ä½ï¼›

   def func1():
      my_lock.acquire()
      print("çº¿ç¨‹1")
      time.sleep(1)
      my_lock.release()

   def func2():
      my_lock.acquire()
      print("çº¿ç¨‹2")
      time.sleep(1)
      my_lock.release()


   t1 =threading.Thread(target=func1,args=å…ƒç»„,kwargs=å­—å…¸)
   t2 =threading.Thread(target=func2,daemon=True) #çº¿ç¨‹å®ˆæŠ¤,å†™æ³•1
   t2.daemon = True # çº¿ç¨‹å®ˆæŠ¤ï¼Œå†™æ³•2
   t1.start()
   t2.start()
```

1. çº¿ç¨‹ä¹‹é—´æ‰§è¡Œæ˜¯æ— åºçš„
2. ä¸»çº¿ç¨‹ä¼šç­‰å¾…æ‰€æœ‰çš„å­çº¿ç¨‹æ‰§è¡Œç»“æŸå†ç»“æŸï¼ˆçº¿ç¨‹å®ˆæŠ¤ï¼‰
3. çº¿ç¨‹ä¹‹é—´å…±äº«å…¨å±€å˜é‡
4. çº¿ç¨‹ä¹‹é—´å…±äº«å…¨å±€å˜é‡æ•°æ®å‡ºç°é”™è¯¯é—®é¢˜ï¼ˆäº’æ–¥é”è§£å†³ï¼‰

- æ­»é”ï¼šä¸€ç›´ç­‰å¾…å¯¹æ–¹é‡Šæ”¾é”çš„æƒ…æ™¯å°±æ˜¯æ­»é”ï¼›
  - æ­»é”çš„åŸå› :ä½¿ç”¨äº’æ–¥é”çš„æ—¶å€™éœ€è¦æ³¨æ„æ­»é”çš„é—®é¢˜ï¼Œæœªåœ¨åˆé€‚çš„åœ°æ–¹æ³¨æ„é‡Šæ”¾é”ï¼›
  - æ­»é”çš„ç»“æœ:ä¼šé€ æˆåº”ç”¨ç¨‹åºçš„åœæ­¢å“åº”ï¼Œåº”ç”¨ç¨‹åºæ— æ³•å†ç»§ç»­å¾€ä¸‹æ‰§è¡Œäº†ï¼›

- äº’æ–¥é”ï¼šå¯¹å…±äº«æ•°æ®è¿›è¡Œé”å®šï¼Œä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹å»æ“ä½œ
- é”ä¸ä½ï¼šä½¿ç”¨ 2 æŠŠåŠä»¥ä¸Šçš„é”ï¼›

## ç”Ÿæˆå™¨ã€è¿­ä»£å™¨ã€

### è¿­ä»£å™¨

1. æ‰‹åŠ¨ç®¡ç†: éœ€è¦æ˜¾å¼åœ°å®ç°`__iter__()`å’Œ`__next_()`æ–¹æ³•ï¼›
2. çŠ¶æ€ç®¡ç†: è¿­ä»£å™¨éœ€è¦è‡ªå·±ç®¡ç†è¿­ä»£çš„çŠ¶æ€ï¼ŒåŒ…æ‹¬å½“å‰ä½ç½®å’Œç»“æŸæ¡ä»¶ï¼›
3. å†…å­˜ä½¿ç”¨: å†…å­˜ä½¿ç”¨å–å†³äºè¿­ä»£å™¨çš„å®ç°ï¼Œé€šå¸¸æ˜¯æƒ°æ€§è®¡ç®—(å³æŒ‰éœ€ç”Ÿæˆæ•°æ®)ï¼›

```python
    class MyIter:
      def __init__(self, start,end):
        self.current_value = start
        self.end = end
      # é‡å†™iteratoræ–¹æ³•ï¼Œè¿”å›å½“å‰å¯¹è±¡ï¼ˆå³ï¼šè¿­ä»£å™¨å¯¹è±¡ï¼‰
      def __iter__(self):
        return self
      # é‡å†™nextæ–¹æ³•ï¼Œè¿”å›å½“å‰å€¼ï¼Œå¹¶æ›´æ–°å½“å‰å€¼
      def __next__(self):
        if self.current_value >= self.end:
          raise StopIteration  # æŠ›å‡ºå¼‚å¸¸ï¼Œè¿­ä»£ç»“æŸ

        value = self.current_value
        self.current_value += 1
        return value

    # for i in range(1,10):
    for i in MyIter(1,10):
      print(i)

    my_iter = iter(MyIter(1,10))
    print(next(my_iter))
    print(next(my_iter))

```

### ç”Ÿæˆå™¨

æ ¹æ®"åˆ¶å®šçš„è§„åˆ™"å¾ªç¯ç”Ÿæˆæ•°æ®ï¼Œå½“æ¡ä»¶ä¸æˆç«‹æ—¶åˆ™ç”Ÿæˆæ•°æ®ç»“æŸã€‚æ•°æ®ä¸æ˜¯ä¸€æ¬¡æ€§å…¨éƒ¨ç”Ÿæˆå‡ºæ¥ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€ä¸ªï¼Œå†ç”Ÿæˆä¸€ä¸ªï¼Œå¯ä»¥èŠ‚çº¦å¤§é‡çš„å†…å­˜ï¼›

åˆ›å»ºç”Ÿæˆå™¨çš„æ–¹å¼: 1ã€ç”Ÿæˆå™¨æ¨å¯¼å¼ï¼›2ã€yield å…³é”®å­—

```python
   # ç”Ÿæˆå™¨æ¨å¯¼å¼
   my_list = [i for i in range(9999)]
   my_gen = (i for i in range(9999)) # æ¨å¯¼å¼

   next(my_gen)

   sys.getsizeof(my_list)
   sys.getsizeof(my_gen)
```

```python
  # yield å…³é”®å­—
  def my_gen():
    for i in range(9999):
      yield i   # yieldåœ¨è¿™é‡Œåšäº†ä¸‰ä»¶äº‹å„¿:1.åˆ›å»ºç”Ÿæˆå™¨å¯¹è±¡ã€‚ 2.æŠŠå€¼å­˜å‚¨åˆ°ç”Ÿæˆå™¨ä¸­ï¼Œ 3.è¿”å›ç”Ÿæˆå™¨ï¼Œ

  my_g = my_gen()
  next(my_g)
```

## Property å±æ€§

è´Ÿè´£æŠŠä¸€ä¸ªæ–¹æ³•â€œå½“å±æ€§â€ä½¿ç”¨ï¼Œæ¥â€œç®€åŒ–ä»£ç â€œä½¿ç”¨ï¼›

- å®šä¹‰ property å±æ€§æœ‰ä¸¤ç§æ–¹å¼: â‘  è£…é¥°å™¨æ–¹å¼ â‘¡ ç±»å±æ€§æ–¹å¼ï¼›

```python
  # æ–¹å¼1
  class Person:
    def __init__(self, age):
      self.__age = age

    @property
    def age(self):   # get_age
      return self.__age

    @age.setter
    def age(self, age):  # set_age
      self.__age = age
  if __name__ == '__main__':
    p = Person(18)
    print(p.age)
    p.age = 20
    print(p.age)
```

```python
  # æ–¹å¼2
  class Person:
    def __init__(self, age):
      self.__age = age

    def get_age(self):
      return self.__age

    def set_age(self, age):
      self.__age = age

    # å‚1:è·å–å€¼çš„å‡½æ•°åï¼Œå‚2:è®¾ç½®å€¼çš„å‡½æ•°å
    age = property(get_age, set_age)
  if __name__ == '__main__':
    p = Person(18)
    print(p.age)
    p.age = 20
    print(p.age)
```

## æ•°æ®ç»“æ„ ä¸ ç®—æ³•

## å®‰è£…å¹¶åˆå§‹åŒ–é¡¹ç›®

1. å®‰è£…uv
   - Linux / macOS: `curl -LsSf https://astral.sh/uv/install.sh | sh`
   - Windows (PowerShell): `powershell -ExecutionPolicy ByPass -Command "irm https://astral.sh/uv/install.ps1 | iex"`
   - æˆ– `pip install uv`
   - `uv --version`
2. åˆå§‹åŒ–é¡¹ç›®: `uv init my_project` ï¼›`cd my_project`;
3. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶æ¿€æ´»ï¼š
   - `uv venv`;
   - Linux/macOS: `source .venv/bin/activate`
   - Windows (PowerShell/CMD): `.venv\Scripts\activate`
4. æ·»åŠ â€.python-version â€œæ–‡ä»¶ï¼Œåœ¨srcä¸‹å†™ä»£ç ï¼›
5. git:
   - `git add uv.lock`
   - .gitignoreï¼ˆæœ€å°ä½†æ­£ç¡®ï¼‰

   ```gitignore
     .venv/
     __pycache__/
     .mypy_cache/
     .pytest_cache/
     .ruff_cache/
     .env
   ```

6. å®‰è£…å¼€å‘ä¾èµ–:`uv add --dev pytest mypy ruff`
   åœ¨ pyproject.toml ä¸­æ·»åŠ ï¼š

   ```python
      [tool.mypy]
      python_version = "3.11"
      strict = true

      # é¡¹ç›®ç»“æ„
      packages = ["my_project"]
      mypy_path = ["src"]

      # å¸¸è§å¦¥å
      ignore_missing_imports = true
      warn_unused_ignores = true
      warn_return_any = true
      warn_unreachable = true

      [tool.ruff]  # æ ¼å¼ + lint
      target-version = "py311"
      line-length = 88

      [tool.ruff.lint] # æ ¼å¼ + lint
      select = ["E", "F", "I", "B", "UP"]
      ignore = ["E501"]
   ```

   - æ‰§è¡Œæ ¼å¼æ£€æŸ¥å’Œæ ¼å¼åŒ–ï¼š`uv run ruff check .`ï¼›`uv run ruff format .`ï¼›
   - æ‰§è¡Œç±»å‹æ£€æŸ¥ï¼š`uv run mypy src`ï¼›

ğŸ‘‰ uv + mypy + ruff + src å¸ƒå±€
ğŸ‘‰ FastAPI + uv + mypy + ruff æ ‡å‡†éª¨æ¶
ğŸ‘‰ LangGraph / LlamaIndex é¡¹ç›®å¦‚ä½•ç”¨ uv ç®¡ç†å¤šå­æ¨¡å—
