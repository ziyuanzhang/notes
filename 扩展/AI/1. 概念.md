# 概念

AI 原生应用的 11 个关键要素，涵盖模型、框架、提示词、RAG、记忆、工具、数据、评估、安全与合规、监控与运维、用户体验设计等方面

## 名词

1. 通用人工智能（AGI）
2. 大语言模型（LLM）

3. 模型上下文协议（MCP）
4. Prompt（提示词）： 是用户向 AI 模型提供的输入指令，用于引导模型生成期望的输出。

   - 它可以是一个具体的问题、一段描述、一组关键词，或是相关的上下文信息，其核心作用是告知模型用户期望获得什么样的内容。
   - Prompt 的载体也不仅限于自然语言文本，还可以包含代码片段、数据格式说明，甚至是图像与文字相结合的多模态输入。
   - Prompt 质量 = 输出质量

5. Agent：可被视为“具备自主智能的实体”，也被广泛地称作“智能体”

   - 有聪明的大脑（模型）、丰富的经验和记忆（数据）、灵巧的双手（工具），并且基于设定的角色协同完成任务;
   - 当单 Agent 无法完成复杂任务的时候，可以协同多 Agent 编排完成复杂任务；

6. Agent 框架与策略：

   - ReAct（推理 + 行动）：在推理（Reasoning）和外部行动（Acting，比如调用搜索引擎或 API）之间交替进行；

7. Memory（记忆）： AI 应用的记忆能力提升了用户体验，实现了跨会话连贯性、个性化和基于历史的深度推理。

   - 短期记忆，也被称为工作记忆或上下文记忆，指的是模型在单次、连续的交互会话中所能直接访问的信息。
   - 长期记忆旨在解决短期记忆的局限，让 AI 能够记住跨越不同会话，甚至数天数月前的信息，如用户偏好、历史项目经验、关键事实等。

8. 工具(Tools)： 工具调用扩展了大模型的能力，使其能主动与外部世界交互，突破知识静态性的限制。

   - 方式一：MCP 协议: 是为大模型与外部数据、应用和服务之间的通信提供一种安全且标准化的语言;
   - 方式二：FuncationCalling: 是模型与外部世界进行交互的协议，它定义了模型如何调用外部工具，以及如何处理工具调用的响应。

9. RAG（检索增强生成）为大模型提供知识库

   - 大模型: 输入--》大模型--》输出
   - RAG:【输入--》检索（根据问题找相似文本）】--》大模型--》输出

10. 微调（Fine-tuning）：优化现有模型（对现有模型，用“特定数据”进行训练，来适应 特定任务）
11. 网关：AI 网关作为应用与大模型、工具之间的智能调度中心，解决了模型切换、Token 管理、语义缓存等 AI 原生需求。

    - 统一的模型接入与厂商解耦；
    - 融合存量系统与 AI；
    - 智能路由与故障转移；
    - 精细化的成本控制与优化；
    - 企业级安全与合规；
    - 数据、观测与优化

12. 运行时：AI 原生应用运行时承载动态业务逻辑、智能体协作与数据流管理，是区别于传统应用的新型执行环境。
13. 可观测：AI 应用的可观测性体系需覆盖全链路追踪、全栈观测和自动化评估，保障系统稳定性与安全性。
14. 评估：AI 应用的评估体系需适应非确定性输出，采用 LLM-as-a-Judge 等新范式，贯穿全生命周期。
15. 安全：AI 原生应用的开放性和自主性带来新的安全挑战，需从应用、模型、数据、身份和基础设施多维度构建纵深防御体系。

- ![AI 原生应用架构](./img/AI体系/AI原生应用架构.jpg)

在此架构之上，构建的 AI 原生应用，是以大模型为认知基础，以 Agent 为编排和执行单元，以数据作为决策和个性化基础，通过工具感知和执行的智能应用。

## Prompt--》Agent--》Function Call--》RAG--》Fine tune--》垂直行业 LLM

![RAG运行流程](./img/operating_process/RAG运行流程.png)

1. 非结构化处理：读取文字、图片等 信息，转化为文本文件(例：pdf、word --> txt)；
2. 提示词模版：将用 系统提示、用户输入 和 内容相关文本块 组合生成一段提示词；

![大模型_数据管理](./img/operating_process/大模型_数据管理.png)

1. 模型臆想（大模型幻觉）：大模型没有这方面知识储备（胡乱回答）；
2. 企业问题：用 RAG（解决 90%） + 微调（解决 10%）

![agent流程图](./img/operating_process/agent流程图.png)

## 1、模型

### 模型分类

1. 大语言模型（简称大模型）是一类具有大量参数（通常在十亿以上）
2. 通用大模型：如 GPT、Claude、Qwen、DeepSeek、Gemini 等系列；它们可以是纯文本的，也可以是多模态的

   - 多模态：能够同时理解图像、声音和文字；
   - 一般来说，模型越大，处理复杂、开放性任务的能力就越强，但是相应的成本和延迟都相对较高。

3. 垂直或领域模型：核心理念是放弃追求通用性，只专注于在垂直行业或特定领域和任务上实现极致的效率和性能；

   - 比如在情感分析、语言翻译、意图分类等特定领域都有对应的垂直领域模型；
   - 一些简单的意图分类和信息提取任务，由一个轻量、快速的专用模型处理，往往更具效率和成本优势。

4. 在实际落地生产的复杂应用中，通常是大模型与垂直领域模型协同工作，分别处理复杂、开放的任务和简单、高频的任务，从而优化整个系统的效果、成本与响应速度。

### 模型能力和微调

1. 模型：都建立在对“预训练数据”中存在的模式和逻辑的理解之上；
2. 专属模型：训练和微调的成本是巨大的，它不仅包括高昂的计算资源费用，还需要海量的高质量标注数据、专业的算法团队以及漫长的开发周期。

## 2、框架

### Agent 设计模式（Agent 框架与策略）

1. ChainofThought（思维链）：

   核心思想：让模型在回答前，把推理过程一步步写出来。不是一口气报出答案，而是把整个推理过程展示出来。

2. Self-Ask（自问自答）：

   核心思想：让模型在回答时学会“反问自己”，把大问题拆成多个小问题，然后逐个回答。

3. ReAct（推理 + 行动）：

   核心思想：在推理（Reasoning）和外部行动（Acting，比如调用搜索引擎或 API）之间交替进行。

4. Plan-and-Execute（计划与执行）：

   核心思想：把任务拆成两个阶段，先生成计划（Planning），再逐步执行（Execution）。

5. TreeofThoughts（ToT，树状思维）：

   核心思想：不是单线思维，而是生成多条思路分支，像树一样展开，再通过评估机制选出最佳分支。

6. Reflexion/IterativeRefinement（反思与迭代优化）

   核心思想：Agent 具备自我纠错的能力，犯错后会总结失败原因，再带着反思尝试下一次。

7. Role-playingAgents（角色扮演式智能体或者机器是多智能体协作）

   核心思想：把任务拆分给不同角色的 Agent，每个 Agent 都有专属职责，通过对话协作完成任务。
